<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Xuanzhong Chen · Tableau Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #111827;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
    }

    header p {
      margin: 0.2rem 0;
      color: #4b5563;
    }

    .card {
      background: #ffffff;
      padding: 1.25rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .card h2 {
      margin-top: 0;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>My Tableau Dashboard</h1>
      <p>Embedded directly from Tableau Public</p>
    </header>

    <section class="card">
      <h2>Story 1 Dashboard</h2>

      <!-- ⭐ YOUR TABLEAU EMBED CODE (unchanged) ⭐ -->
      <div class='tableauPlaceholder' id='viz1763020154033' style='position: relative'>
        <noscript>
          <a href='#'>
            <img alt='Story 1 ' src='https://public.tableau.com/static/images/12/1200_17630201338440/Story1/1_rss.png' style='border: none' />
          </a>
        </noscript>

        <object class='tableauViz' style='display:none;'>
          <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
          <param name='embed_code_version' value='3' />
          <param name='site_root' value='' />
          <param name='name' value='1200_17630201338440/Story1' />
          <param name='tabs' value='no' />
          <param name='toolbar' value='yes' />
          <param name='static_image' value='https://public.tableau.com/static/images/12/1200_17630201338440/Story1/1.png' />
          <param name='animate_transition' value='yes' />
          <param name='display_static_image' value='yes' />
          <param name='display_spinner' value='yes' />
          <param name='display_overlay' value='yes' />
          <param name='display_count' value='yes' />
          <param name='language' value='en-US' />
          <param name='filter' value='publish=yes' />
        </object>
      </div>

      <script type='text/javascript'>
        var divElement = document.getElementById('viz1763020154033');
        var vizElement = divElement.getElementsByTagName('object')[0];
        vizElement.style.width = '100%';
        vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
        var scriptElement = document.createElement('script');
        scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
        vizElement.parentNode.insertBefore(scriptElement, vizElement);
      </script>
      <!-- ⭐ END OF EMBED CODE ⭐ -->

    </section>
  </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Provider Search · BAN586 Capstone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #111827;
    }

    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    header {
      margin-bottom: 1.5rem;
    }

    header h1 {
      margin: 0 0 0.3rem;
      font-size: 1.8rem;
    }

    header p {
      margin: 0.1rem 0;
      color: #4b5563;
      font-size: 0.9rem;
    }

    .search-card {
      background: #ffffff;
      padding: 1rem 1.25rem 1.25rem;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      margin-bottom: 1.5rem;
    }

    .search-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .field {
      display: flex;
      flex-direction: column;
      flex: 1 1 160px;
      min-width: 150px;
    }

    .field label {
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 0.2rem;
      color: #4b5563;
    }

    input[type="text"], select {
      padding: 0.4rem 0.5rem;
      border-radius: 0.5rem;
      border: 1px solid #d1d5db;
      font-size: 0.9rem;
      background: #f9fafb;
    }

    input[type="text"]:focus, select:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 1px rgba(37,99,235,0.4);
    }

    .results-info {
      font-size: 0.85rem;
      color: #6b7280;
      margin-bottom: 0.5rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
      background: #ffffff;
      border-radius: 0.75rem;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    thead {
      background: #e5e7eb;
    }

    th, td {
      padding: 0.45rem 0.6rem;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
    }

    th {
      font-weight: 600;
      font-size: 0.8rem;
      white-space: nowrap;
    }

    tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .no-results {
      padding: 0.75rem;
      text-align: center;
      font-size: 0.9rem;
      color: #6b7280;
    }

    .pagination {
      margin-top: 0.75rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: #6b7280;
    }

    .pagination-controls {
      display: flex;
      gap: 0.4rem;
    }

    .btn {
      padding: 0.3rem 0.7rem;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      cursor: pointer;
      font-size: 0.8rem;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .btn-primary {
      background: #2563eb;
      color: white;
      border-color: #2563eb;
    }

    .btn:hover:not(:disabled) {
      background: #e5e7eb;
    }

    .btn-primary:hover:not(:disabled) {
      background: #1d4ed8;
    }

    @media (max-width: 640px) {
      table {
        font-size: 0.78rem;
      }
      th, td {
        padding: 0.35rem 0.45rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Provider Search</h1>
      <p>BAN586 Capstone · Search the provider data warehouse by name, NPI, specialty, and location.</p>
      <p style="font-size:0.8rem; color:#9ca3af;">Data source: 545project dataset converted from Access.</p>
    </header>

    <section class="search-card">
      <div class="search-row">
        <div class="field">
          <label for="searchText">Search (name, NPI, facility, city…)</label>
          <input type="text" id="searchText" placeholder="Type a name, NPI, specialty, city, etc.">
        </div>
        <div class="field">
          <label for="stateFilter">State</label>
          <select id="stateFilter">
            <option value="">All states</option>
          </select>
        </div>
        <div class="field">
          <label for="specFilter">Primary specialty</label>
          <select id="specFilter">
            <option value="">All specialties</option>
          </select>
        </div>
      </div>
      <div class="results-info" id="resultsInfo">
        Loading data…
      </div>
      <div style="overflow-x:auto;">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>NPI</th>
              <th>Full Name</th>
              <th>Primary Specialty</th>
              <th>Facility Name</th>
              <th>City</th>
              <th>State</th>
              <th>Phone</th>
              <th>Facility Type</th>
            </tr>
          </thead>
          <tbody id="resultsBody">
            <tr><td colspan="8" class="no-results">Loading…</td></tr>
          </tbody>
        </table>
      </div>
      <div class="pagination" id="pagination">
        <div id="pageInfo"></div>
        <div class="pagination-controls">
          <button class="btn" id="prevPage">Previous</button>
          <button class="btn" id="nextPage">Next</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    const PAGE_SIZE = 50;

    let allData = [];
    let filteredData = [];
    let currentPage = 1;

    const searchInput = document.getElementById('searchText');
    const stateFilter = document.getElementById('stateFilter');
    const specFilter = document.getElementById('specFilter');
    const resultsBody = document.getElementById('resultsBody');
    const resultsInfo = document.getElementById('resultsInfo');
    const pageInfo = document.getElementById('pageInfo');
    const prevPageBtn = document.getElementById('prevPage');
    const nextPageBtn = document.getElementById('nextPage');

    // Load JSON data
    fetch('providers.json')
      .then(resp => resp.json())
      .then(data => {
        allData = data;
        buildFilters();
        applyFilters();
      })
      .catch(err => {
        console.error(err);
        resultsInfo.textContent = "Error loading data. Make sure providers.json is uploaded to the same folder.";
      });

    function buildFilters() {
      // Unique states
      const states = Array.from(new Set(allData.map(r => r.State).filter(Boolean))).sort();
      states.forEach(st => {
        const opt = document.createElement('option');
        opt.value = st;
        opt.textContent = st;
        stateFilter.appendChild(opt);
      });

      // Unique specialties
      const specs = Array.from(new Set(allData.map(r => r.Pri_spec).filter(Boolean))).sort();
      specs.forEach(sp => {
        const opt = document.createElement('option');
        opt.value = sp;
        opt.textContent = sp;
        specFilter.appendChild(opt);
      });
    }

    function applyFilters() {
      const q = (searchInput.value || '').toLowerCase().trim();
      const st = stateFilter.value;
      const sp = specFilter.value;

      filteredData = allData.filter(row => {
        let ok = true;

        if (q) {
          const text = [
            row["Full Name"],
            row.NPI,
            row.Pri_spec,
            row["Facility Name"],
            row["City/Town"],
            row.State
          ].map(v => (v || '').toString().toLowerCase()).join(' ');
          if (!text.includes(q)) ok = false;
        }

        if (st && row.State !== st) ok = false;
        if (sp && row.Pri_spec !== sp) ok = false;

        return ok;
      });

      currentPage = 1;
      renderTable();
    }

    function renderTable() {
      resultsBody.innerHTML = '';

      if (!filteredData.length) {
        resultsBody.innerHTML = '<tr><td colspan="8" class="no-results">No matching records.</td></tr>';
        resultsInfo.textContent = '0 results.';
        pageInfo.textContent = '';
        prevPageBtn.disabled = true;
        nextPageBtn.disabled = true;
        return;
      }

      const total = filteredData.length;
      const totalPages = Math.ceil(total / PAGE_SIZE);

      if (currentPage > totalPages) currentPage = totalPages;

      const start = (currentPage - 1) * PAGE_SIZE;
      const end = Math.min(start + PAGE_SIZE, total);
      const pageSlice = filteredData.slice(start, end);

      pageSlice.forEach(row => {
        const tr = document.createElement('tr');

        function td(text) {
          const cell = document.createElement('td');
          cell.textContent = text || '';
          return cell;
        }

        tr.appendChild(td(row.NPI));
        tr.appendChild(td(row["Full Name"]));
        tr.appendChild(td(row.Pri_spec));
        tr.appendChild(td(row["Facility Name"]));
        tr.appendChild(td(row["City/Town"]));
        tr.appendChild(td(row.State));
        tr.appendChild(td(row["Telephone Number"]));
        tr.appendChild(td(row["Facility Type"]));

        resultsBody.appendChild(tr);
      });

      resultsInfo.textContent = `${total} result(s) — showing ${start + 1} to ${end}.`;
      pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
      prevPageBtn.disabled = currentPage === 1;
      nextPageBtn.disabled = currentPage === totalPages;
    }

    searchInput.addEventListener('input', () => {
      applyFilters();
    });

    stateFilter.addEventListener('change', () => {
      applyFilters();
    });

    specFilter.addEventListener('change', () => {
      applyFilters();
    });

    prevPageBtn.addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        renderTable();
      }
    });

    nextPageBtn.addEventListener('click', () => {
      const totalPages = Math.ceil(filteredData.length / PAGE_SIZE);
      if (currentPage < totalPages) {
        currentPage++;
        renderTable();
      }
    });
  </script>
</body>
</html>

